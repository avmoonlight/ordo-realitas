<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Relatórios — Ordo Realitas</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/relatorios.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</head>
<body>

     <!-- BOTÃO HAMBURGUER -->
    <div class="hamburger" id="hamburger">
        <span></span>
        <span></span>
        <span></span>
    </div>


  <!-- Botão de alternância de tema -->
  <button id="theme-toggle" class="theme-btn">
    <i class="bi bi-moon-fill" id="theme-icon"></i>
  </button>
<!-- Bootstrap Icons -->

    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar">
        <h2>Ordo Realitas</h2>

        <ul>
            <li>
                <a href="{{ url_for('usuarios') }}">
                    <i class="fa-solid fa-chart-pie"></i> Overview
                </a>
            </li>
            <li>
                <a href="{{ url_for('usuarios') }}">
                    <i class="fa-solid fa-users"></i> Usuários
                </a>
            </li>
            <li>
                <a href="{{ url_for('equipes') }}">
                    <i class="fa-solid fa-people-group"></i> Equipes
                </a>
            </li>
            <li class="active">
                <a href="{{ url_for('relatorios') }}">
                    <i class="fa-solid fa-file-lines"></i> Relatórios
                </a>
            </li>
            <li>
                <a href="{{ url_for('agentes') }}">
                    <i class="fa-solid fa-brain"></i> Área Cris
                </a>
            </li>
        </ul>

        <div class="logout-link">
            <a href="{{ url_for('logout') }}">
                <i class="fa-solid fa-right-from-bracket"></i> Sair
            </a>
        </div>
    </aside>

    <!-- Conteúdo principal -->
    <div class="main-content">
        <h1>Gestão de Relatórios</h1>
        <button class="btn-novo" id="abrirModal"><i class="fa-solid fa-plus"></i> Novo Relatório</button>

        <div class="itens-container">
            {% for relatorio in relatorios %}
            <div class="item-card" 
     data-id="{{ relatorio.id }}"
     data-nome="{{ relatorio.nome }}"
     data-equipe="{{ relatorio.equipe }}"
     data-data="{{ relatorio.data }}"
     data-texto="{{ relatorio.texto }}"
     data-autoria="{{ relatorio.autoria }}"
>

                <h3>{{ relatorio.nome }}</h3>
                <p>Equipe: {{ relatorio.equipe }}</p>
                <p>Data: {{ relatorio.data }}</p>

                <div class="acoes">
                    <button class="editar" data-id="{{ relatorio.id }}"><i class="fa-solid fa-pen"></i></button>
                    <button class="excluir" data-id="{{ relatorio.id }}"><i class="fa-solid fa-trash"></i></button>
                </div>

                <div class="detalhes-item">
                <div class="detalhes-conteudo">
                    <h4>Relatório Completo</h4>
                    <p class="texto-relatorio">{{ relatorio.texto }}</p>
                    <p class="autoria"><strong>Autoria:</strong> {{ relatorio.autoria }}</p>
                </div>
            </div>

            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Modal Novo Relatório -->
    <div id="modalNovoItem" class="modal">
        <div class="modal-content">
            <span class="fechar">&times;</span>
            <h2>Novo Relatório</h2>
            <form action="{{ url_for('adicionar_relatorio') }}" method="POST">
                <label>Nome:</label>
                <input type="text" name="nome" required>
                <label>Equipe:</label>
                <input type="text" name="equipe">
                <label>Data:</label>
                <input type="date" name="data" required>
                <label>Texto:</label>
                <textarea name="texto" rows="4" required></textarea>
                <label>Autoria:</label>
                <input type="text" name="autoria">
                <button type="submit" class="btn-salvar">Salvar</button>
            </form>
        </div>
    </div>

    <!-- Modal Editar Relatório -->
    <div id="modalEditarItem" class="modal">
        <div class="modal-content">
            <span class="fechar">&times;</span>
            <h2>Editar Relatório</h2>
            <form id="formEditarItem" method="POST">
                <label>Nome:</label>
                <input type="text" name="nome" id="editNome" required>
                <label>Equipe:</label>
                <input type="text" name="equipe" id="editEquipe">
                <label>Data:</label>
                <input type="date" name="data" id="editData" required>
                <label>Texto:</label>
                <textarea name="texto" id="editTexto" rows="4" required></textarea>
                <label>Autoria:</label>
                <input type="text" name="autoria" id="editAutoria">
                <button type="submit" class="btn-salvar">Atualizar</button>
            </form>
        </div>
    </div>

    <!-- Modal Excluir Relatório -->
    <div id="modalExcluirItem" class="modal">
        <div class="modal-content">
            <span class="fechar">&times;</span>
            <h2>Confirmar Exclusão</h2>
            <p>Tem certeza que deseja excluir este relatório?</p>
            <form id="formExcluirItem" method="POST">
                <button type="submit" class="btn-salvar confirmar">Confirmar</button>
            </form>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
    <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
    <script src="{{ url_for('static', filename='js/modal-relatorios.js') }}"></script>
</html>
